{"version":3,"sources":["GlobalModal.jsx","FolderLabel.jsx","BookmarkLabel.jsx","BookmarkList.jsx","App.js","index.js"],"names":["Modal","defaultStyles","overlay","backgroundColor","content","border","GlobalModal","react_default","a","createElement","lib_default","ariaHideApp","isOpen","this","props","style","height","bottom","width","top","left","transform","title","getBody","Component","FolderLabel","className","text","BookmarkLabel","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","folders","createModalBody","bind","assertThisInitialized","getFolders","_this2","fetch","mode","then","response","json","data","setState","_this3","action","method","type","name","value","id","folder_id","defaultValue","url","map","item","selected","folder_name","onClick","appRef","closeModal","float","src","icon","alt","href","target","rel","createIconLabel","_this4","getHyperlink","openModal","key","getLabel","BookmarkList","bookmarks","getBookmarks","forEach","node_type","children","parent_folder_id","keys","hasOwnProperty","push","node","result","undefined","src_BookmarkLabel_0","length","react_treeview_default","nodeLabel","src_FolderLabel","child","traverse","processBookmarkTree","App","modalIsOpen","modalTitle","modalBodyBuilder","bodyBuilder","src_GlobalModal","src_BookmarkList","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.635989dd.chunk.js","sourcesContent":["/**\n * Global modal centered floating element with custom title and a body building\n * function to allow more flexibility while creating the body.\n */\nimport React, { Component } from 'react';\nimport Modal from 'react-modal';\n\n\n// Change to dark color theme.\nModal.defaultStyles.overlay.backgroundColor = '#333333AA';\nModal.defaultStyles.content.backgroundColor = '#222222CC';\nModal.defaultStyles.content.border = '#333333CC';\n\n\nclass GlobalModal extends Component {\n    render() {\n        return <Modal\n            ariaHideApp={false}\n            isOpen={this.props.isOpen}\n            style={{\n                content: {\n                    // auto-adjust height and bottom space\n                    height: 'auto',\n                    bottom: 'auto',\n\n                    // dynamic 80% viewport width\n                    width: '80vw',\n\n                    // move origin to center\n                    top: '50%',\n                    left: '50%',\n                    transform: 'translate(-50%, -50%)'\n                }\n            }}\n        >\n            <h2>{this.props.title}</h2>\n            {this.props.getBody()}\n        </Modal>;\n    }\n}\n\n\nexport default GlobalModal;\n","import React, { Component } from 'react';\n\n\n/**\n * Custom react-treeview/TreeView nodeLabel property element.\n */\nclass FolderLabel extends Component {\n    render() {\n        return <span className=\"node\">{this.props.text}</span>;\n    }\n}\n\n\nexport default FolderLabel;\n","import React, { Component } from 'react';\nimport './BookmarkLabel.css';\n\n\n/**\n * Custom react-treeview/TreeView nodeLabel property element.\n */\nclass BookmarkLabel extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            folders: []\n        };\n        this.createModalBody = this.createModalBody.bind(this);\n    }\n\n    componentWillMount() {\n        this.getFolders();\n    }\n\n    getFolders() {\n        fetch(\n            '/list_folders',\n            { mode: \"cors\" }\n        ).then(response => response.json()).then(data => {\n            this.setState({ folders: data });\n        });\n    }\n\n    createModalBody() {\n        return <form\n            className='bookmarkLabelForm'\n            action='./edit_bookmark'\n            method='post'\n        >\n            {/* invisible values for POST */}\n            <input\n                type='hidden'\n                name='id'\n                value={this.props.id}\n            />\n            <input\n                type='hidden'\n                name='folder_id'\n                value={this.props.folder_id}\n            />\n\n            {/* visible elements */}\n            <p className='bookmarkLabelParagraph'>\n                <label>Title</label>\n                <input\n                    className='bookmarkLabelInput'\n                    type='text'\n                    name='title'\n                    defaultValue={this.props.text}\n                />\n            </p>\n            <p className='bookmarkLabelParagraph'>\n                <label>URL</label>\n                <input\n                    className='bookmarkLabelInput'\n                    type='url'\n                    name='url'\n                    defaultValue={this.props.url}\n                />\n            </p>\n            <p className='bookmarkLabelParagraph'>\n                <label>Folder</label>\n                <select\n                    className='bookmarkLabelInput'\n                    name='folder'\n                >{\n                    this.state.folders.map((item) => {\n                        return <option\n                            value={item.id}\n                            selected={\n                                this.props.folder_id === item.id ? 'selected' : ''\n                            }\n                        >{item.folder_name}</option>;\n                    })\n                }</select>\n            </p>\n            <p className='bookmarkLabelParagraph'>\n                <input type='submit' value='Save' />\n                <button\n                    onClick={this.props.appRef.closeModal}\n                    style={{ float: 'right' }}\n                >\n                    Cancel\n                </button>\n            </p>\n        </form>;\n    }\n\n    createIconLabel() {\n        return <span><img\n            // data:image/png;base64,encodedstring\n            src={this.props.icon}\n            alt={this.props.text}\n        /> {this.props.text}</span>;\n    }\n\n    getHyperlink() {\n        return <a\n            href={this.props.url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n        >{\n            this.props.icon ? this.createIconLabel() : this.props.text\n        }</a>;\n    }\n\n    getLabel() {\n        return <span>\n            {this.getHyperlink()}\n            <span\n                className='bookmarkLabel fa fa-pencil-square-o'\n                style={{ float: 'right' }}\n                onClick={() => {\n                    this.props.appRef.openModal(\n                        'Edit bookmark', this.createModalBody\n                    )\n                }}\n            />\n        </span>;\n    }\n\n    render() {\n        return <div\n            className='info'\n            key={'bookmark|' + this.props.text}\n        >{this.getLabel()}</div>\n    }\n}\n\n\nexport default BookmarkLabel;\n","import React, { Component } from 'react';\nimport fetch from 'node-fetch';\n\nimport TreeView from 'react-treeview';\nimport 'react-treeview/react-treeview.css';\nimport FolderLabel from './FolderLabel';\nimport BookmarkLabel from './BookmarkLabel';\n\n\n/**\n * Component rendering the full bookmark tree with nested, collapsable\n * folders and hyperlink bookmarks.\n */\nclass BookmarkList extends Component {\n    constructor() {\n        super();\n        this.className = \"frostmark-bookmark-list\";\n        this.state = { bookmarks: [] };\n    }\n\n    /**\n     * Get the required data during the component mounting.\n     */\n    componentWillMount() {\n        this.getBookmarks();\n    }\n\n    /**\n     * Fetch and store the data in the component state.\n     */\n    getBookmarks() {\n        fetch(\n            '/list_tree',\n            { mode: \"cors\" }\n        ).then(response => response.json()).then(data => {\n            this.setState({ bookmarks: data });\n        });\n    }\n\n    /**\n     * Split bookmark tree into folders and bookmarks and nest them manually\n     * into TreeView (folder, nested folders) and its children.\n     */\n    processBookmarkTree() {\n        let folders = {};\n        let bookmarks = {};\n\n        this.state.bookmarks.forEach(item => {\n            if (item.node_type === 'Folder') {\n                folders[item.id] = {\n                    id: item.id,\n                    folder_name: item.folder_name,\n                    children: [],\n                    parent_folder_id: item.parent_folder_id,\n                    node_type: item.node_type\n                };\n            } else if (item.node_type === 'Bookmark') {\n                bookmarks[item.id] = {\n                    id: item.id,\n                    title: item.title,\n                    url: item.url,\n                    folder_id: item.folder_id,\n                    node_type: item.node_type,\n                    icon: item.icon\n                };\n            }\n        });\n\n        let item;\n        Object.keys(bookmarks).forEach(key => {\n            item = bookmarks[key];\n            if (folders.hasOwnProperty(item.folder_id)) {\n                folders[item.folder_id].children.push(item);\n            }\n        });\n\n        Object.keys(folders).forEach(key => {\n            item = folders[key];\n            if (folders.hasOwnProperty(item.parent_folder_id)) {\n                if (item.parent_folder_id !== null) {\n                    folders[item.parent_folder_id].children.push(item);\n                }\n            }\n        });\n\n        return folders[0];\n    }\n\n    traverse(node) {\n        let result;\n        if (node === undefined) {\n            return <BookmarkLabel text=\"No data found.\" />;\n        }\n        if (node.node_type === 'Folder') {\n            if (!node.children.length) {\n                result = (\n                    <TreeView\n                        key={'folder|' + node.folder_name}\n                        nodeLabel={\n                            <FolderLabel text={node.folder_name}></FolderLabel>\n                        }\n                    />\n                );\n            } else {\n                result = (\n                    <TreeView\n                        key={'folder|' + node.folder_name}\n                        nodeLabel={\n                            <FolderLabel text={node.folder_name}></FolderLabel>\n                        }\n                    >\n                        {node.children.map(child => this.traverse(child))}\n                    </TreeView>\n                );\n            }\n        } else if (node.node_type === 'Bookmark') {\n            result = <BookmarkLabel\n                id={node.id}\n                folder_id={node.folder_id}\n                url={node.url}\n                icon={node.icon}\n                text={node.title}\n                appRef={this.props.appRef}\n            />;\n        }\n        return result;\n    }\n\n    render() {\n        return <div className={this.className}>\n            {this.traverse(this.processBookmarkTree())}\n        </div>;\n    }\n}\n\n\nexport default BookmarkList;\n","/**\n * Main application entrypoint assembling all other components.\n */\nimport React, { Component } from 'react';\nimport './App.css';\nimport GlobalModal from './GlobalModal';\nimport BookmarkList from './BookmarkList';\n\n\n/**\n * Application class included in the index.js/index.html.\n */\nclass App extends Component {\n    constructor() {\n        super();\n        this.state = {\n            modalIsOpen: false,\n            modalTitle: '',\n            modalBodyBuilder: () => {}\n        };\n\n        // Bind the functions to the instance\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n    }\n\n    /**\n     * Create a modal with a custom title and a function that renders its body.\n     */\n    openModal(title, bodyBuilder) {\n        this.setState({\n            modalTitle: title,\n            modalIsOpen: true,\n            modalBodyBuilder: bodyBuilder\n        });\n    }\n\n    /**\n     * Close the modal and clear the defaults.\n     */\n    closeModal() {\n        this.setState({\n            modalTitle: '',\n            modalIsOpen: false,\n            modalBodyBuilder: () => {}\n        });\n    }\n\n    /**\n     * Render all the components.\n     */\n    render() {\n        return <div className=\"App\">\n            <GlobalModal\n                appRef={this}\n                isOpen={this.state.modalIsOpen}\n                getBody={this.state.modalBodyBuilder}\n                title={this.state.modalTitle}\n            />\n            <BookmarkList appRef={this} />\n        </div>;\n    }\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nimport 'font-awesome/css/font-awesome.min.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}