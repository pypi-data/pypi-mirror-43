(function(t){function e(e){for(var a,i,s=e[0],c=e[1],l=e[2],u=0,v=[];u<s.length;u++)i=s[u],n[i]&&v.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(v.length)v.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/sitestatic/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},2233:function(t,e,r){"use strict";var a=r("4771"),n=r.n(a);n.a},"2f1f":function(t){t.exports={en:{Add:"Add",Address:"Address",Cancel:"Cancel",Close:"Close","Domain name":"Domain name","Edit provider":"Email provider","Email providers":"Email providers",Migrations:"Migrations",Name:"Name","New account":"New account","New provider":"New provider","Old account":"Old account",Port:"Port",Proceed:"Proceed",Provider:"Provider","Remove this migration?":"Remove this migration?","Rename to":"Rename to",Search:"Search","Secured connection":"Secured connection"},fr:{Add:"Ajouter",Address:"Adresse",Cancel:"Annuler",Close:"Fermer","Domain name":"Nom de domain","Edit provider":"Modifier le fournisseur","Email providers":"Fournisseurs de courriel",Migrations:"Migrations",Name:"Nom","New account":"Nouveau compte","New provider":"Nouveau fournisseur","Old account":"Ancien compte",Port:"Port",Proceed:"Valider",Provider:"Fournisseur","Remove this migration?":"Supprimer cette migration ?","Rename to":"Renommer en",Search:"Chercher","Secured connection":"Connexion sécurisée"}}},4771:function(t,e,r){},"49e0":function(t,e,r){"use strict";var a=r("8ac8"),n=r.n(a);n.a},"56d7":function(t,e,r){"use strict";r.r(e);r("6b54");var a=r("2b0e"),n=r("5035"),o=r.n(n),i=r("03a5"),s=r.n(i),c=(r("c5c5"),r("4a7a")),l=r.n(c),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"sidebar collapse navbar-collapse",attrs:{id:"leftcol"}},[r("ul",{staticClass:"nav nav-sidebar",attrs:{role:"menu"}},[r("router-link",{attrs:{tag:"li",to:{name:"providers"},exact:""}},[r("a",[r("translate",[t._v("Email providers")])],1)]),r("router-link",{attrs:{tag:"li",to:{name:"migrations"},exact:""}},[r("a",[r("translate",[t._v("Migrations")])],1)])],1)]),r("div",{staticClass:"main"},[r("router-view")],1)])},u=[],v=r("2877"),f={},p=Object(v["a"])(f,d,u,!1,null,null,null),m=p.exports,h=r("8c4f"),b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-5"},[r("search-form",{on:{search:function(e){return t.getProviders(e)}}})],1),r("div",{staticClass:"col-sm-7"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.showProviderForm=!0}}},[r("span",{staticClass:"fa fa-plus"}),t._v(" "),r("translate",[t._v("Add")])],1)])]),t.providers?r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[r("translate",[t._v("Name")])],1),r("th",[r("translate",[t._v("Address")])],1),r("th",[r("translate",[t._v("Port")])],1),r("th")])]),r("tbody",t._l(t.providers,function(e){return r("tr",{key:"provider-"+e.id},[r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.address))]),r("td",[t._v(t._s(e.port))]),r("td",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:function(r){return t.editProvider(e)}}},[r("span",{staticClass:"fa fa-edit"})]),r("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(r){return t.deleteProvider(e)}}},[r("span",{staticClass:"fa fa-trash"})])])])}),0)]):t._e(),t.showProviderForm?r("provider-form",{attrs:{initialProvider:t.editedProvider},on:{close:t.closeProviderForm}}):t._e()],1)},g=[],_=r("2f62"),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{show:!0}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("h3",{staticClass:"modal-title"},[t._v(t._s(t.title))])]),r("div",{attrs:{slot:"body"},slot:"body"},[r("form",{staticClass:"form-horizontal",attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[r("m-textfield",{attrs:{label:t._f("translate")("Name"),error:void 0!==t.errors.name,errorMessages:t.errors.name},model:{value:t.provider.name,callback:function(e){t.$set(t.provider,"name",e)},expression:"provider.name"}}),r("m-textfield",{attrs:{label:t._f("translate")("Address"),error:void 0!==t.errors.address,errorMessages:t.errors.address},model:{value:t.provider.address,callback:function(e){t.$set(t.provider,"address",e)},expression:"provider.address"}}),r("m-textfield",{attrs:{label:t._f("translate")("Port"),error:void 0!==t.errors.port,errorMessages:t.errors.port},model:{value:t.provider.port,callback:function(e){t.$set(t.provider,"port",e)},expression:"provider.port"}}),r("m-checkbox",{attrs:{label:t._f("translate")("Secured connection")},model:{value:t.provider.secured,callback:function(e){t.$set(t.provider,"secured",e)},expression:"provider.secured"}}),r("hr"),r("p",{staticClass:"header"},[t._v("Associated domains")]),t._l(t.provider.domains,function(e,a){return r("div",{key:"domain-"+a,staticClass:"row"},[r("div",{staticClass:"col-sm-5"},[r("m-textfield",{attrs:{placeholder:t._f("translate")("Domain name"),labelWidth:"",inputWidth:"col-sm-12"},model:{value:e.name,callback:function(r){t.$set(e,"name",r)},expression:"domain.name"}})],1),r("div",{staticClass:"col-sm-5"},[r("v-select",{attrs:{placeholder:t._f("translate")("Rename to"),options:t.domains,label:"name",index:"pk"},model:{value:e.new_domain,callback:function(r){t.$set(e,"new_domain",r)},expression:"domain.new_domain"}})],1),r("div",{staticClass:"col-sm-2"},[r("a",{staticClass:"btn btn-default btn-xs",attrs:{href:"#"},on:{click:t.addDomain}},[r("span",{staticClass:"fa fa-plus"})]),0!==a?r("a",{staticClass:"btn btn-default btn-xs",attrs:{href:"#"},on:{click:function(e){return t.removeDomain(a)}}},[r("span",{staticClass:"fa fa-trash"})]):t._e()])])}),r("hr"),r("div",{staticClass:"pull-right"},[r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.close}},[r("translate",[t._v("Close")])],1),r("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Save"}})]),r("div",{staticClass:"clearfix"})],2)])])},C=[],P=r("f499"),x=r.n(P),O=r("cebc"),w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"modal",staticClass:"modal fade show in background-darken",attrs:{tabindex:"-1",role:"dialog"}},[r("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[t._t("header")],2),r("div",{staticClass:"modal-body"},[t._t("body")],2),t.showFooter?r("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()])])])},k=[],j={props:{show:{type:Boolean,required:!0,twoWay:!0},showFooter:{type:Boolean,default:!1}}},E=j,$=(r("d198"),Object(v["a"])(E,w,k,!1,null,"5057e8c7",null)),S=$.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("div",{staticClass:"col-sm-offset-3 col-sm-7"},[r("div",{staticClass:"checkbox"},[r("label",[r("input",{ref:"checkbox",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{input:function(e){return t.updateValue()}}}),t._v(" "+t._s(t.label)+"\n      ")])])])])},A=[],F={props:{label:String,value:Boolean},methods:{updateValue:function(){this.$emit("input",this.$refs.checkbox.checked)}}},M=F,D=Object(v["a"])(M,N,A,!1,null,null,null),R=D.exports,q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group",class:{"has-error":t.error}},[t.label?r("label",{staticClass:"control-label",class:t.labelWidth},[t._v(t._s(t.label))]):t._e(),r("div",{class:t.inputWidth},[r("input",{ref:"textfield",staticClass:"form-control",attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.updateValue()}}}),t.error?r("span",{staticClass:"help-block"},t._l(t.errorMessages,function(e,a){return r("p",{key:"error-"+a},[t._v(t._s(e))])}),0):t._e()])])},T=[],V={name:"m-textfield",props:{error:{type:Boolean,default:!1},errorMessages:Array,label:String,placeholder:String,type:{type:String,default:"text"},labelWidth:{type:String,default:"col-sm-3"},inputWidth:{type:String,default:"col-sm-7"},value:{required:!1}},methods:{updateValue:function(){this.$emit("input",this.$refs.textfield.value)}}},U=V,W=Object(v["a"])(U,q,T,!1,null,null,null),I=W.exports,B={components:{modal:S,"m-checkbox":R,"m-textfield":I},computed:Object(O["a"])({},Object(_["b"])("providers",["domains"]),{title:function(){return void 0===this.provider.id?this.$gettext("New provider"):this.$gettext("Edit provider")}}),data:function(){return{errors:{},provider:this.loadProvider(this.initialProvider)}},methods:{addDomain:function(){this.provider.domains.push({})},removeDomain:function(t){this.provider.domains.splice(t,1)},close:function(){this.$emit("close"),this.errors={},this.provider={}},loadProvider:function(t){if(t){var e=JSON.parse(x()(t));return e.domains.length||(e.domains=[{}]),e}return{domains:[{}]}},save:function(){var t=this,e=void 0!==this.provider.id?"providers/updateEmailProvider":"providers/createEmailProvider";this.$store.dispatch(e,this.provider).then(function(e){t.close()}).catch(function(e){t.errors=e.response.data})}},props:{initialProvider:Object},watch:{initialProvider:function(t){this.loadProvider(t)}}},J=B,L=(r("49e0"),Object(v["a"])(J,y,C,!1,null,"518c0948",null)),z=L.exports,H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"form-horizontal",attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[r("div",{staticClass:"form-group has-feedback"},[r("div",{staticClass:"col-sm-12"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.searchPlaceholder,id:"searchquery",name:"searchquery"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),r("span",{staticClass:"fa fa-search form-control-feedback"})])])])},X=[],G={data:function(){return{query:""}},computed:{searchPlaceholder:function(){return this.$gettext("Search")}},methods:{search:function(){this.$emit("search",this.query)}}},K=G,Q=Object(v["a"])(K,H,X,!1,null,null,null),Y=Q.exports,Z={components:{"provider-form":z,"search-form":Y},computed:Object(_["b"])("providers",["providers"]),data:function(){return{editedProvider:{domains:[{}]},showProviderForm:!1}},methods:{resetProvider:function(){this.editedProvider={domains:[{}]}},closeProviderForm:function(){this.showProviderForm=!1,this.resetProvider()},editProvider:function(t){this.editedProvider=t,this.showProviderForm=!0},deleteProvider:function(t){this.$store.dispatch("providers/deleteEmailProvider",t)},getProviders:function(t){this.$store.dispatch("providers/listEmailProviders",t)}},mounted:function(){this.$store.dispatch("providers/listEmailProviders"),this.$store.dispatch("providers/listDomains")}},tt=Z,et=(r("2233"),Object(v["a"])(tt,b,g,!1,null,null,null)),rt=et.exports,at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-5"},[r("search-form",{on:{search:function(e){return t.getMigrations(e)}}})],1)]),t.migrations?r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[r("translate",[t._v("Provider")])],1),r("th",[r("translate",[t._v("Old account")])],1),r("th",[r("translate",[t._v("New account")])],1),r("th")])]),r("tbody",t._l(t.migrations,function(e){return r("tr",{key:"migration-"+e.id},[r("td",[t._v(t._s(e.provider.name))]),r("td",[t._v(t._s(e.username))]),r("td",[t._v(t._s(e.mailbox.full_address))]),r("td",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(r){return t.deleteMigration(e)}}},[r("span",{staticClass:"fa fa-trash"})])])])}),0)]):t._e()])},nt=[],ot=r("308d"),it=r("6bb5"),st=r("013f"),ct=r("4e2b"),lt=r("d225"),dt=r("b0b4"),ut=r("bd86"),vt=r("bc3a"),ft=r.n(vt),pt=ft.a.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}),mt=function(){function t(){Object(lt["a"])(this,t),Object(ut["a"])(this,"resource",null)}return Object(dt["a"])(t,[{key:"getFullUrl",value:function(t){return t}},{key:"list",value:function(t){return pt.get(this.getFullUrl(this.resource),t)}},{key:"get",value:function(t,e){var r="".concat(this.resource).concat(t,"/");return pt.get(this.getFullUrl(r),e)}},{key:"create",value:function(t){return pt.post(this.getFullUrl(this.resource),t)}},{key:"update",value:function(t,e){var r="".concat(this.resource).concat(t,"/");return pt.put(this.getFullUrl(r),e)}},{key:"patch",value:function(t,e){var r="".concat(this.resource).concat(t,"/");return pt.patch(this.getFullUrl(r),e)}},{key:"delete",value:function(t){var e="".concat(this.resource).concat(t,"/");return pt.delete(this.getFullUrl(e))}}]),t}(),ht=function(t){function e(){var t,r;Object(lt["a"])(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return r=Object(ot["a"])(this,(t=Object(it["a"])(e)).call.apply(t,[this].concat(n))),Object(ut["a"])(Object(st["a"])(r),"resource","/api/v1/email-providers/"),r}return Object(ct["a"])(e,t),e}(mt),bt=function(t){function e(){var t,r;Object(lt["a"])(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return r=Object(ot["a"])(this,(t=Object(it["a"])(e)).call.apply(t,[this].concat(n))),Object(ut["a"])(Object(st["a"])(r),"resource","/api/v1/domains/"),r}return Object(ct["a"])(e,t),e}(mt),gt=function(t){function e(){var t,r;Object(lt["a"])(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return r=Object(ot["a"])(this,(t=Object(it["a"])(e)).call.apply(t,[this].concat(n))),Object(ut["a"])(Object(st["a"])(r),"resource","/api/v1/migrations/"),r}return Object(ct["a"])(e,t),e}(mt),_t={components:{"search-form":Y},data:function(){return{migrations:[]}},methods:{deleteMigration:function(t){var e=this;this.$dialog.confirm(this.$gettext("Remove this migration?"),{cancelText:this.$gettext("Cancel"),okText:this.$gettext("Proceed")}).then(function(r){(new gt).delete(t.id).then(function(r){e.migrations=e.migrations.filter(function(e){return e.id!==t.id})})})},getMigrations:function(t){var e=this,r={};void 0!==t&&(r={params:{search:t}}),(new gt).list(r).then(function(t){e.migrations=t.data})}},mounted:function(){this.getMigrations()}},yt=_t,Ct=Object(v["a"])(yt,at,nt,!1,null,null,null),Pt=Ct.exports;a["a"].use(h["a"]);var xt,Ot=new h["a"]({base:"/sitestatic/",linkActiveClass:"active",routes:[{path:"/",name:"providers",component:rt},{path:"/migrations",name:"migrations",component:Pt}]}),wt="ADD_PROVIDER",kt="SET_PROVIDER",jt="SET_PROVIDERS",Et="DELETE_PROVIDER",$t="SET_DOMAINS",St={domains:[],providers:[]},Nt={domains:function(t){return t.domains},providers:function(t){return t.providers}},At={listEmailProviders:function(t,e){var r=t.commit,a={};return void 0!==e&&(a={params:{search:e}}),(new ht).list(a).then(function(t){r(jt,t.data)})},createEmailProvider:function(t,e){var r=t.commit;return(new ht).create(e).then(function(t){r(wt,t.data)})},updateEmailProvider:function(t,e){var r=t.commit;return(new ht).update(e.id,e).then(function(t){r(kt,t.data)})},deleteEmailProvider:function(t,e){var r=t.commit;return(new ht).delete(e.id).then(function(t){r(Et,e)})},listDomains:function(t){var e=t.commit;return(new bt).list().then(function(t){e($t,t.data)})}},Ft=(xt={},Object(ut["a"])(xt,jt,function(t,e){t.providers=e}),Object(ut["a"])(xt,wt,function(t,e){t.providers.push(e)}),Object(ut["a"])(xt,kt,function(t,e){t.providers.filter(function(r,n){r.id===e.id&&a["a"].set(t.providers,n,e)})}),Object(ut["a"])(xt,Et,function(t,e){t.providers=t.providers.filter(function(t){return t.id!==e.id})}),Object(ut["a"])(xt,$t,function(t,e){t.domains=e}),xt),Mt={namespaced:!0,state:St,getters:Nt,actions:At,mutations:Ft};a["a"].use(_["a"]);var Dt=new _["a"].Store({modules:{providers:Mt}}),Rt=r("2f1f");a["a"].config.productionTip=!1,a["a"].use(o.a,{availableLanguages:{en:"English",fr:"Français"},translations:Rt}),a["a"].component("v-select",l.a),a["a"].filter("translate",function(t){return t?a["a"].prototype.$gettext(t.toString()):""}),a["a"].use(s.a),a["a"].config.language=userLang,new a["a"]({router:Ot,store:Dt,render:function(t){return t(m)}}).$mount("#app")},"8ac8":function(t,e,r){},d198:function(t,e,r){"use strict";var a=r("f6d1"),n=r.n(a);n.a},f6d1:function(t,e,r){}});
//# sourceMappingURL=app.e525be98.js.map