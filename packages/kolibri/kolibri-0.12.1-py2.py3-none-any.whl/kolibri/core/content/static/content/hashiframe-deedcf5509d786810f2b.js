!function(t){var e={};function a(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);var i=function(t){this.local=window,this.remote=t,this.local.addEventListener("message",this.handleMessage.bind(this)),this.__messageHandlers={}};i.prototype.handleMessage=function(t){var e=t.data,a=e.nameSpace,i=e.event,s=e.data;void 0!==a&&void 0!==i&&this.__messageHandlers[a]&&this.__messageHandlers[a][i]&&this.__messageHandlers[a][i].forEach(function(t){try{t(s)}catch(t){console.debug("Error while executing callback for "+a+" for event "+i),console.debug(t)}})},i.prototype.sendLocalMessage=function(t){void 0===t&&(t={});var e={event:t.event,data:t.data,nameSpace:t.nameSpace};this.local.postMessage(e,"*")},i.prototype.sendMessage=function(t){var e={event:t.event,data:t.data,nameSpace:t.nameSpace};this.remote.postMessage(e,"*")},i.prototype.registerMessageHandler=function(t){void 0===t&&(t={});var e=t.event,a=t.nameSpace,i=t.callback;"function"==typeof i&&void 0!==e&&void 0!==a&&(this.__messageHandlers[a]||(this.__messageHandlers[a]={}),this.__messageHandlers[a][e]||(this.__messageHandlers[a][e]=[]),this.__messageHandlers[a][e].push(i))},i.prototype.removeMessageHandler=function(t){void 0===t&&(t={});var e=t.event,a=t.nameSpace,i=t.callback;if(this.__messageHandlers[a]&&this.__messageHandlers[a][e]){if(i){var s=this.__messageHandlers[a][e].indexOf(i);if(s>-1)return this.__messageHandlers[a][e].splice(s,1)}this.__messageHandlers[a][e]=[]}};var s=i,n={READYCHECK:"readycheck",READY:"ready",STATEUPDATE:"stateupdate"},o=function(t){this.__mediator=t,this.events=Object.assign({},n)};o.prototype.setData=function(t){this.__setData(t),this.stateUpdated()},o.prototype.sendMessage=function(t,e){this.__mediator.sendMessage({nameSpace:this.nameSpace,event:t,data:e})},o.prototype.on=function(t,e){if(!Object.values(this.events).includes(t))throw ReferenceError(t+" is not a valid event name for "+this.nameSpace);this.__mediator.registerMessageHandler({nameSpace:this.nameSpace,event:t,callback:e})},o.prototype.off=function(t,e){if(!Object.values(this.events).includes(t))throw ReferenceError(t+" is not a valid event name for "+this.nameSpace);this.__mediator.removeMessageHandler({nameSpace:this.nameSpace,event:t,callback:e})},o.prototype.stateUpdated=function(){this.sendMessage(this.events.STATEUPDATE,this.data)};var r=o,c=["length","key","getItem","setItem","removeItem","clear"],h=function(t){function e(e){t.call(this,e),this.data={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__setData=function(t){void 0===t&&(t={}),this.data=t,this.setDataToShim()},e.prototype.setDataFromShim=function(){var t=this,e=Object.assign({},this.data),a=!1,i=Object.keys(this.shim);i.forEach(function(i){if(!c.includes(i)){var s=String(t.shim[i]);t.data[i]!==s&&(e[i]=s,a=!0)}}),Object.keys(this.data).forEach(function(t){i.includes(t)||c.includes(t)||(delete e[t],a=!0)}),a&&(this.__setData(e),this.stateUpdated())},e.prototype.setDataToShim=function(){var t=this;this.shim&&(Object.assign.apply(Object,[this.shim].concat(Object.entries(this.data).filter(function(t){return!c.includes(t[0])}).map(function(t){var e;return(e={})[t[0]]=t[1],e}))),Object.keys(this.shim).forEach(function(e){t.data[e]||delete t.shim[e]}))},e.prototype.iframeInitialize=function(){this.__setShimInterface(),Object.defineProperty(window,this.nameSpace,{value:this.shim,configurable:!0})},e.prototype.__setShimInterface=function(){var t=this,e=function(){},a={length:{configurable:!0}};return a.length.get=function(){return t.setDataFromShim(),Object.keys(t.data).length},e.prototype.key=function(e){return t.setDataFromShim(),Object.keys(t.data)[e]||null},e.prototype.getItem=function(e){return t.setDataFromShim(),t.data[e]||null},e.prototype.setItem=function(e,a){a=String(a),t.data[e]=a,c.includes(e)||(this[e]=a),t.stateUpdated()},e.prototype.removeItem=function(e){delete t.data[e],c.includes(e)||delete this[e],t.stateUpdated()},e.prototype.clear=function(){t.data={},t.stateUpdated()},Object.defineProperties(e.prototype,a),this.shim=new e,this.setDataToShim(),this.shim},e}(r),p=function(t){function e(e){t.call(this,e),this.nameSpace="localStorage",this.__setData=this.__setData.bind(this),this.on(this.events.STATEUPDATE,this.__setData)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h),d=function(t){function e(e){t.call(this,e),this.nameSpace="sessionStorage"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.stateUpdated=function(){},e}(h),u="session",_=function(t){function e(e){t.call(this,e),Object.assign(this.events,{NOW:"now"}),this.nameSpace="cookie",this.__clearData(),this.__nowDiff=0,this.__setData=this.__setData.bind(this),this.__setNowDiff=this.__setNowDiff.bind(this),this.__getCookies=this.__getCookies.bind(this),this.__setItem=this.__setItem.bind(this),this.on(this.events.STATEUPDATE,this.__setData),this.on(this.events.NOW,this.__setNowDiff)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var a={data:{configurable:!0}};return e.prototype.__clearData=function(){this.__data=Object.assign({},{rootCookies:{},byPath:{}})},e.prototype.__removeExpiredCookies=function(t){var e=this,a={rootCookies:{},byPath:{}},i=function(t){var a={};return Object.keys(t).forEach(function(i){new Date(t[i].expires)>e.__now()&&(a[i]=t[i])}),a};return a.rootCookies=i(t.rootCookies),Object.keys(t.byPath).forEach(function(e){var s=i(t.byPath[e]);Object.keys(s).length&&(a.byPath[e]=s)}),a},e.prototype.__setData=function(t){t&&t.rootCookies&&t.byPath?this.__data=this.__removeExpiredCookies(t):this.__clearData()},e.prototype.iframeInitialize=function(){Object.defineProperty(document,this.nameSpace,{get:this.__getCookies,set:this.__setItem,configurable:!0})},a.data.get=function(){var t=this,e={rootCookies:{},byPath:{}};function a(t){var e={};return Object.keys(t).forEach(function(a){t[a].expires!==u&&(e[a]=t[a])}),e}return e.rootCookies=a(this.__data.rootCookies),Object.keys(this.__data.byPath).forEach(function(i){var s=a(t.__data.byPath[i]);Object.keys(s).length&&(e.byPath[i]=s)}),this.__removeExpiredCookies(e)},e.prototype.__now=function(){return new Date(Date.now()+this.__nowDiff)},e.prototype.__setNowDiff=function(t){this.__nowDiff=t},e.prototype.setNow=function(t){this.__setNowDiff(new Date(t).getTime()-Date.now()),this.sendMessage(this.events.NOW,this.__nowDiff)},e.prototype.__getCookies=function(){var t=Object.assign({},this.__data.rootCookies),e=window.location.pathname;return this.__data.byPath[e]&&Object.assign(t,this.__data.byPath[e]),Object.keys(t).map(function(e){return e+"="+t[e].value}).join("; ")},e.prototype.__setItem=function(t){var e=this;void 0===t&&(t="");var a=t.split(";");if(a[0]){var i,s=a[0].split("="),n=s[0],o={value:s[1],expires:u},r=!1,c=/path=(.+)/,h=/max-age=(.+)/,p=/expires=(.+)/;a.slice(1).forEach(function(t){try{var a=c.exec(t),s=h.exec(t),n=p.exec(t);if(a)i=a[1];else if(s){var d=Number(s[1]);if(isNaN(d))return;d>0?o.expires=new Date(e.__now().getTime()+d):r=!0}else if(n){var u=new Date(n[1]);if(isNaN(u))return;u<=Date.now()?r=!0:o.expires=new Date(e.__now().getTime()+(u.getTime()-Date.now()))}}catch(t){}}),r?this.__removeItem(n,i):i?(this.__data.byPath[i]||(this.__data.byPath[i]={}),this.__data.byPath[i][n]=o):this.__data.rootCookies[n]=o,this.stateUpdated()}},e.prototype.__removeItem=function(t,e){e?this.__data.byPath[e]&&(delete this.__data.byPath[e][t],Object.keys(this.__data.byPath[e]).length||delete this.__data.byPath[e]):delete this.__data.rootCookies[t],this.stateUpdated()},Object.defineProperties(e.prototype,a),e}(r),f=["application/javascript","application/ecmascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript"];function l(t){document.documentElement.innerHTML=t;var e=document.querySelectorAll("script");!function t(e,a){void 0===a&&(a=0),e.length&&(0,e[a])(function(){if(++a<e.length)t(e,a);else{var i=document.createEvent("Event");i.initEvent("DOMContentLoaded",!0,!0),document.dispatchEvent(i);var s=document.querySelector("body");s&&s.onload&&s.onload()}})}([].map.call(e,function(t){return function(e){!function(t,e){var a=document.createElement("script");a.type="text/javascript",t.src?(a.onload=e,a.onerror=e,a.src=t.src):a.innerHTML=t.innerHTML;var i=t.parentNode;i.removeChild(t);var s=t.getAttribute("type");s&&-1===f.indexOf(s)||i.appendChild(a),t.src||e()}(t,e)}}))}function m(){var t=new XMLHttpRequest;t.addEventListener("load",function(){l(t.responseText)}),t.open("GET",window.location.href),t.send()}var v=function(){var t=this;this.mediator=new s(window.parent),this.localStorage=new p(this.mediator),this.localStorage.iframeInitialize(),this.sessionStorage=new d(this.mediator),this.sessionStorage.iframeInitialize(),this.cookie=new _(this.mediator),this.cookie.iframeInitialize(),XMLHttpRequest.prototype.origOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){this.origOpen.apply(this,arguments),this.setRequestHeader("X-Requested-With","XMLHttpRequest")},function(){var t=document.createElement.bind(document),e=["img","audio","video","script"];document.createElement=function(a,i){var s=t(a,i);return e.includes(a.toLowerCase())&&function(t){t.crossOrigin="anonymous"}(s),s}.bind(document)}(),this.mediator.registerMessageHandler({nameSpace:"hashi",event:n.READY,callback:m}),this.mediator.sendMessage({nameSpace:"hashi",event:n.READY,data:!0}),this.mediator.registerMessageHandler({nameSpace:"hashi",event:n.READYCHECK,callback:function(){t.mediator.sendMessage({nameSpace:"hashi",event:n.READY,data:!0})}})};!function(){new v}()}]);